<!doctype html>
<title>BloonsReverse</title>
<head></head>
<body>
    <canvas id="gameCanvas" width="700" height="500">
    
    <script>
        var canvas, canvasContext;
        
        window.onload = function(){
            canvas = document.getElementById('gameCanvas');
            canvasContext = canvas.getContext('2d');
            
            document.addEventListener('keydown', keyPressed);
            document.addEventListener('keyup', keyReleased);
            
//            document.addEventListener('keydown', keyPressed);
//            document.addEventListener('keyup', keyReleased);
            
            setInterval(mainloop, 1000/50);
        }
        function mainloop(){
            if(onetimer == true){
                playerXpos = playerStartPos[0];
                playerYpos = (playerStartPos[1] - playerSize / 2);
                onetimer = false;
            }
            colorRect(0,0,canvas.width,canvas.height,'#D2FEFF');
            imgLoad(img2,0,0,canvas.width,canvas.height);//the background 
            colorRect(playerXpos,playerYpos,playerSize,playerSize,'#39ff14');//player draw (the color is neon green)
            imgLoad(imgRope,ropePos[0],ropePos[1],ropeSize[0],ropeSize[1]);//the image for the rope
            bloons()
            move()
            Boundries()
            drawBullet();
            moveBullet();
            BPCollision()
        }
        var playerXpos = 40;
        var playerYpos = 350;
        var playerSize = 50;
        var playerYspeed = 10;
        var playerXspeed = 10;
        
        var playerStartPos = [40,250];//(x,y)
        var onetimer = true;
        
        var BloonXpos = 600;
        var BloonYpos = [100,250,400];
        var BloonSize = 50;
    
        var UP_KEY = 87;
        var DOWN_KEY = 83;
        var LEFT_KEY = 65;
        var RIGHT_KEY = 68;
        
        var upKeyPressed = false;
        var downKeyPressed = false;
        var leftKeyPressed = false;
        var rightKeyPressed = false;
        
        var img = new Image();   // Create new img element
        var singleLoadImg = true;
        
        var img2 = new Image();   // Create new img element
        img2.src = "img/blue.jpg"
        
        var imgRope = new Image();
        imgRope.src = "img/rope2.png"
        var ropeSize = [20,652];//(width,length)
        var ropePos = [200,0];//(x,y)
        
        function    interLoader() {
            
        }
        
        
        function bloons(){
            colorRect(BloonXpos,BloonYpos[0] - BloonSize / 2,BloonSize,BloonSize,'black');
            colorRect(BloonXpos,BloonYpos[1] - BloonSize / 2,BloonSize,BloonSize,'black');
            colorRect(BloonXpos,BloonYpos[2] - BloonSize / 2,BloonSize,BloonSize,'black');
        }
        
        function move(){
            if (upKeyPressed == true && playerYpos > 0){
                playerYpos -= playerYspeed;
            }
            
            if (downKeyPressed == true && playerYpos < canvas.height - playerSize){
                playerYpos += playerYspeed;
            }
            if (leftKeyPressed == true && playerXpos > 0){
                playerXpos -= playerXspeed;
            }
            
            if (rightKeyPressed == true && playerXpos < ropePos[0] - playerSize + 3){
                playerXpos += playerXspeed;
            }
            
        }
        
        function BPCollision(){
            bullets.forEach(function(bullet,i){
                
                
                
                
            });
            
        }
        
        function Boundries(){
            if (playerXpos + playerSize > ropePos[0] +5){
                playerXpos = ropePos[0] +5 - playerSize;
            }
            if(playerXpos < 0 ){
                playerXpos = 0;
            }
            if(playerYpos < 0){
               playerYpos = 0;
            }
            if(playerYpos > canvas.height - playerSize){
                playerYpos = canvas.height - playerSize;
            }
        }
        
        function keyPressed(evt){
            
            if(evt.keyCode == UP_KEY){
               upKeyPressed = true;
            }
            if(evt.keyCode == DOWN_KEY){
                downKeyPressed = true;
            }
            if(evt.keyCode == LEFT_KEY){
                leftKeyPressed = true;
            }
            if(evt.keyCode == RIGHT_KEY){
                rightKeyPressed = true;
            }
        }
        
        function keyReleased(evt){
            
            if(evt.keyCode == UP_KEY){
                upKeyPressed = false;
            }
            if(evt.keyCode == DOWN_KEY){
                downKeyPressed = false;
            } 
            if(evt.keyCode == LEFT_KEY){
                leftKeyPressed = false;
            }
            if(evt.keyCode == RIGHT_KEY){
                rightKeyPressed = false;
            }
        }
        
        function newIMG(){
            if(singleLoadImg == true){
                new Image();
                singleLoadImg = false;
            }
        }

        function imgLoad(src,x,y,w,h){
            canvasContext.drawImage(src,x,y,w,h);
        }
        
        function colorRect(x,y,w,h,c){
            canvasContext.fillStyle = c;
            canvasContext.fillRect(x,y,w,h)
        }
        
        var bullets = [];
        
        function makeBullets(){
            var bulletPos = Math.floor(Math.random()*3) + 1;
            
            var POSorNEG = Math.floor(Math.random()*2)+1;
            const BULLET_SIZE = 15;
            var bulletXpos = 600;
            var bulletYpos = 0;
            if(bulletPos == 1){
               bulletYpos = BloonYpos[0];
            } else if (bulletPos == 2){
                bulletYpos = BloonYpos[1];     
            } else {
                bulletYpos = BloonYpos[2]; 
            }
            
            var bulletXspeed = Math.floor(Math.random()*(15 - 5) + 5);
            var bulletYspeed = Math.floor(Math.random()*(15 - 5) + 5);
            
            var bullet = {
                bulletXpos: bulletXpos,
                BULLET_SIZE: BULLET_SIZE,
                bulletYpos: bulletYpos,
                bulletXspeed: bulletXspeed,
                bulletYspeed: bulletYspeed,
                POSorNEG: POSorNEG
            }
            
            bullets.push(bullet);
        }
        
        for(i = 0; i < 5; i++){// controlls the amount of shots
            makeBullets();
        }
        
        function drawBullet(){
            bullets.forEach(function(bullet,i){
                colorRect(bullet.bulletXpos,bullet.bulletYpos,bullet.BULLET_SIZE,bullet.BULLET_SIZE,'orange');
                
            });
        }
        
        function moveBullet(){
            bullets.forEach(function(bullet,i){
                if (bullet.bulletXpos < playerXpos + playerSize && bullet.bulletXpos > playerXpos && bullet.bulletYpos < playerYpos + playerSize && bullet.bulletYpos > playerYpos){
                    console.log('h')
                playerXpos = 0;
                }
                
                if(bullet.bulletXpos <= 0 - bullet.BULLET_SIZE){
                   bullet.bulletXpos = BloonXpos;
                    var bulletXspeed2 = Math.floor(Math.random()*(15 - 5) + 5);
                    var bulletYspeed2 = Math.floor(Math.random()*(15 - 5) + 5);
                    bullet.bulletXspeed = bulletXspeed2;
                    bullet.bulletYspeed = bulletYspeed2;
                    
                    var bulletPos = Math.floor(Math.random()*3) + 1;
                    var bulletPos = Math.floor(Math.random()*3) + 1;
                     if(bulletPos == 1){
                       bullet.bulletYpos = BloonYpos[0];
                    } else if (bulletPos == 2){
                        bullet.bulletYpos = BloonYpos[1];     
                    } else {
                        bullet.bulletYpos = BloonYpos[2]; 
                    }
                    
                    
                    
                    
                    var POSorNEG = Math.floor(Math.random()*2)+1;
                    if(POSorNEG == 1){
                        bullet.bulletYspeed *= 1;
                    }else {
                        bullet.bulletYspeed *= -1;
                        
                    }
                } 
                if(bullet.bulletYpos < 0){
                    bullet.bulletYspeed *= -1;
                }
                if(bullet.bulletYpos > canvas.height - bullet.BULLET_SIZE){
                    bullet.bulletYspeed *= -1;
                }
                if(bullet.bulletXpos > 0 - bullet.BULLET_SIZE){
                bullet.bulletXpos -= bullet.bulletXspeed;
                    bullet.bulletYpos += bullet.bulletYspeed;
                }
            });
        }
        
    </script>
    </canvas>
    
</body>
<!--use github for work plan-->
